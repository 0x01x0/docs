(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{347:function(a,e,t){"use strict";t.r(e);var r=t(4),s=Object(r.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"docker-基本选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-基本选项"}},[a._v("#")]),a._v(" Docker 基本选项")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("--name aria2-pro - 容器名称，可自定义以示区分。\n\n--restart unless-stopped - 设置容器重启策略，详情参见 Docker 官方文档。\n\n--log-opt max-size=1m - 日志大小限制为 1MB，防止 Aria2持续下载产生大量的日志占用磁盘空间。\n\n--network host - 使用 host 网络模式。直接使用宿主机网络，免去端口映射导致的部分性能损失，且灵活性更高，可更方便的配置使用 IPv6 网络。host 模式仅适用于 Docker 17.06+ ，如果你的 Docker 版本低于此，请先升级。\n")])])]),t("h2",{attrs:{id:"目录映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目录映射"}},[a._v("#")]),a._v(" 目录映射")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-v ~/aria2-config:/config - 配置目录映射，配置文件持久化。左边为宿主机路径供自定义，不要有中文、不要混用配置文件。\n\n-v ~/aria2-downloads:/downloads - 下载目录映射。左边为宿主机路径供自定义，不要有中文。\n")])])]),t("h2",{attrs:{id:"文件权限设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件权限设置"}},[a._v("#")]),a._v(" 文件权限设置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-e PUID=$UID, -e PGID=$GID - 设置容器内账户 UID 与 GID。目的是修正非 root 账户使用中遇到的文件权限问题。$UID 与 $GID 这两个变量分别为当前启动此容器账户的 UID 与 GID 值，如果映射的目录权限不是当前执行启动命令的用户或者使用 GUI 创建容器请务必执行 id 命令手动获取并设置，比如 -e PUID=1000。\n")])])]),t("p",[a._v("本项目对文件权限的处理方法参考了 Lin­uxServer.io 的项目，有关信息详见 "),t("a",{attrs:{href:"https://docs.linuxserver.io/general/understanding-puid-and-pgid",target:"_blank",rel:"noopener noreferrer"}},[a._v("Understanding PUID and PGID"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"aria2-配置选项环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aria2-配置选项环境变量"}},[a._v("#")]),a._v(" Aria2 配置选项环境变量")]),a._v(" "),t("p",[a._v("用于设置一些可能需要自定义的 Aria2 配置选项。")]),a._v(" "),t("blockquote",[t("p",[a._v("TIPS: 以下环境变量定义后将直接写入配置文件，通过变量定义后无法通过配置文件修改，因为每次容器重启会自动修正为环境变量定义的值。你也可以选择忽略它们，直接在容器创建后修改配置文件。")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-e RPC_SECRET=<TOKEN> - RPC 密钥设置，即 We­bUI 连接时需要填写的密码。默认密码：P3TERX。\n\n-e RPC_PORT=6800 - RPC 端口设置，忽略则可通过配置文件修改。如果你使用 brige 网络模式请忽略此项，使用默认的 6800 端口进行映射。\n\n-e LISTEN_PORT=6888 - BT 监听端口（TCP）、DHT 监听端口（UDP）设置，即 Aria2 配置中 listen-port 与 dht-listen-port 选项定义的端口，默认值 6888。PT 下载建议定义为 5 位数，比如 25236、51413。如果你使用 brige 网络模式请忽略此项，使用默认的 6888 端口进行映射。\n\n-e DISK_CACHE=<SIZE> - 磁盘缓存设置，默认值 64M。本地路由器或 NAS 建议在有足够的内存空闲情况下设置为适当的大小以减少磁盘 I/​O 延长硬盘寿命，比如 128M、256M 等，但不要超过内存可用空间大小。\n")])])]),t("h2",{attrs:{id:"其它环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其它环境变量"}},[a._v("#")]),a._v(" 其它环境变量")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-e UMASK_SET=022 - umask 设置，默认值 022。\n\n-e RCLONE=enable - 开启 RCLONE 联动功能。首次启动容器会自动安装 RCLONE，且每次重启会自动更新。\n\n-e TRACKERS=no - 禁用自动获取 BT tracker ，供 PT 下载需求使用。\n\n-e TZ=Asia/Shanghai - 时区设置，镜像默认时区 Asia/Shanghai，若无特殊需求无需自定义。\n")])])]),t("h2",{attrs:{id:"bridge-网络模式端口映射说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bridge-网络模式端口映射说明"}},[a._v("#")]),a._v(" bridge 网络模式端口映射说明")]),a._v(" "),t("p",[a._v("bridge 网络模式下需要把容器内部的端口映射到宿主机，它是 Docker 默认的网络模式，所以很多 Docker 镜像的默认使用说明都包含端口映射的参数，也包括在 2020 年 3 月 28 日之前的本项目。端口映射多了一层 NAT ，会有一定的性能损失，所以对于全新部署且没有特殊需求不会用到下面这些参数，并推荐使用 host 网络模式进行部署。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-p 6800:6800 - RPC 通讯端口映射，左边为宿主机端口供自定义。\n\n-p 6888:6888 - BT 监听端口（TCP）映射，即 Aria2 配置中 listen-port 选项定义的端口。左边为宿主机端口，PT 下载建议定义为 5 位数，比如 25236、51413。\n\n-p 6888:6888/udp - DHT 监听端口（UDP）映射，即 Aria2 配置中 dht-listen-port 选项定义的端口。可与 BT 监听端口不同。PT 下载可忽略。\n")])])]),t("p",[a._v("bridge 网络模式启动命令示例：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -d \\\n  --name aria2-pro \\\n  --restart unless-stopped \\\n  --log-opt max-size=1m \\\n  -e PUID=$UID \\\n  -e PGID=$GID \\\n  -e RPC_SECRET=<TOKEN> \\\n  -p 6800:6800 \\\n  -p 6888:6888 \\\n  -p 6888:6888/udp \\\n  -v ~/aria2-config:/config \\\n  -v ~/aria2-downloads:/downloads \\\n  p3terx/aria2-pro\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);